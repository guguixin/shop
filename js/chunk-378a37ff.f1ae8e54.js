(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-378a37ff"],{1175:function(t,s,i){"use strict";i.r(s);var a=function(){var t=this,s=t.$createElement,a=t._self._c||s;return t.product?a("div",{staticClass:"payment"},[a("div",{staticClass:"allAddress"},[null==t.product.addressInfo?a("div",{staticClass:"address"},[a("van-cell",{attrs:{"is-link":"",title:"设置收货地址"},on:{click:function(s){s.stopPropagation(),t.show=!0}}}),a("van-action-sheet",{attrs:{title:"选择地址"},model:{value:t.show,callback:function(s){t.show=s},expression:"show"}},[a("div",{staticClass:"content"},[a("img",{attrs:{src:i("6877"),alt:""}}),a("van-button",{staticClass:"signout",attrs:{round:"",to:"/address",type:"info"}},[t._v("新加地址")])],1)])],1):t._e(),null!=t.product.addressInfo?a("div",{staticClass:"address"},[a("van-cell",{attrs:{"is-link":""},on:{click:function(s){s.stopPropagation(),t.show=!0}},scopedSlots:t._u([{key:"title",fn:function(){return[a("div",[a("span",{staticClass:"custom-title titleson"},[t._v(t._s(t.product.addressInfo.real_name))]),a("span",{staticClass:"custom-title titleson2"},[t._v(t._s(t.product.addressInfo.phone))])]),a("div",[t._v(" "+t._s(t.product.addressInfo.province)+t._s(t.product.addressInfo.city)+t._s(t.product.addressInfo.district)+" ")])]},proxy:!0}],null,!1,2064333460)}),a("van-action-sheet",{attrs:{title:"选择地址"},model:{value:t.show,callback:function(s){t.show=s},expression:"show"}},[a("div",{staticClass:"content"},[t._l(t.address,(function(s){return a("div",{key:s.id,staticClass:"list",style:{color:1==s.is_default?"#fc4141":""},on:{click:function(i){return t.adddefault(s.id)}}},[a("div",{staticClass:"item1"},[a("div",{staticClass:"addressTxt"},[a("van-icon",{attrs:{name:"location"}})],1),a("div",{staticClass:"addressTxt1"},[a("div",{staticClass:"box"},[a("span",{staticClass:"custom-title titleson"},[t._v(t._s(s.real_name))]),a("span",{staticClass:"custom-title titleson2"},[t._v(t._s(s.phone))])]),a("div",{staticClass:"box1"},[t._v(" "+t._s(s.province)+t._s(s.city)+t._s(s.district)+" ")])])]),a("div",{staticClass:"icon"},[a("van-icon",{attrs:{name:"certificate"}})],1)])})),a("van-button",{staticClass:"signout",attrs:{round:"",to:"/address",type:"info"}},[t._v("新加地址")])],2)])],1):t._e(),t._m(0)]),a("div",{staticClass:"orderGoods"},[t._v("共"+t._s(t.product.cartInfo.length)+"件商品")]),t.product?a("div",t._l(t.product.cartInfo,(function(s){return a("div",{key:s.id,staticClass:"commodity"},[a("div",{staticClass:"commodityson1"},[a("div",{staticClass:"pictrue"},[a("img",{attrs:{src:s.productInfo.image,alt:""}})]),a("div",{staticClass:"text"},[a("div",{staticClass:"name"},[a("span",[t._v(" "+t._s(s.productInfo.store_name)+" ")]),a("span",[t._v("x "+t._s(s.cart_num))])]),a("div",{staticClass:"money"},[a("div",[t._v(t._s(s.productInfo.attrInfo.suk))]),a("div",[t._v("￥"+t._s(s.productInfo.price))])])])])])})),0):t._e(),a("div",{staticClass:"list"},[a("div",{staticClass:"item"},[a("div",[t._v("积分抵扣")]),a("div",{staticClass:"text"},[t._v(" 当前积分"),a("span",{staticClass:"textson"},[t._v(t._s(t.product.userInfo.integral))]),a("van-checkbox",{on:{change:t.Change},model:{value:t.checked,callback:function(s){t.checked=s},expression:"checked"}})],1)]),a("div",{staticClass:"item"},[a("div",[t._v("会员优惠")]),a("div",{staticClass:"text"},[t._v("-￥"+t._s(t.product.cartInfo[0].vip_truePrice))])]),t._m(1),t._m(2)]),a("div",{staticClass:"item2"},[a("div",[t._v("支付方式")]),a("div",{staticClass:"wechatitem",style:{borderColor:1==t.indexcolor?"#fc5445":"",color:1==t.indexcolor?"#e93323":""},on:{click:function(s){t.indexcolor=1}}},[a("div",[a("van-icon",{attrs:{name:"wechat"}}),t._v(" 微信支付")],1),a("div",[t._v("微信快捷支付")])]),a("div",{staticClass:"wechatitem2",style:{borderColor:2==t.indexcolor?"red":"",color:2==t.indexcolor?"#e93323":""},on:{click:function(s){t.indexcolor=2}}},[a("div",[a("van-icon",{attrs:{name:"gold-coin"}}),t._v(" 余额支付")],1),a("div",[t._v("可用余额："+t._s(t.product.userInfo.now_money))])])]),a("div",{staticClass:"moneyList"},[a("div",[a("span",[t._v("商品总价：")]),a("span",[t._v("￥"+t._s(t.price/100))])]),t.product.priceGroup.storePostage?a("div",[a("span",[t._v("运费：")]),a("span",[t._v("+￥"+t._s(t.product.priceGroup.storePostage))])]):t._e()]),a("van-submit-bar",{attrs:{price:t.price,"button-text":"立即结算"},on:{submit:t.onSubmit}})],1):t._e()},e=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"line"},[a("img",{attrs:{src:i("f8b9"),alt:""}})])},function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"item"},[i("div",[t._v("快递费用")]),i("div",{staticClass:"text"},[t._v("免运费")])])},function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"item1"},[i("div",[t._v("备注信息")]),i("textarea",{attrs:{name:"",id:"",cols:"30",rows:"10",placeholder:"请添加备注（150字以内）"}})])}],o={data:function(){return{product:null,checked:!1,checkeds:!1,show:!1,indexcolor:1,price:0,priceing:0,priceend:null,address:[]}},created:function(){var t=this;this.$axios.post("/api/order/confirm",{cartId:this.$route.query.id}).then((function(s){if(200==s.data.status){t.product=s.data.data,console.log(t.product);for(var i=0;i<=t.product.cartInfo.length;i++)t.price+=100*(t.product.cartInfo[i].productInfo.price*t.product.cartInfo[i].cart_num-t.product.cartInfo[i].vip_truePrice*t.product.cartInfo[i].cart_num)}else t.$toast(s.data.msg)})),this.$axios.get("/api/address/list?page=1&limit=20").then((function(s){t.address=s.data.data}))},methods:{adddefault:function(t){var s=this;this.product.addressInfo.id=t,this.$axios.post("/api/address/default/set",{id:this.product.addressInfo.id}).then((function(t){200==t.data.status?s.$toast({message:"添加地址成功"}):s.$toast(t.data.msg)})),this.$axios.post("/api/order/confirm",{cartId:this.$route.query.id}).then((function(t){if(200==t.data.status){s.product=t.data.data,console.log(s.product.orderKey);for(var i=0;i<=s.product.cartInfo.length;i++)s.price+=100*(s.product.cartInfo[i].productInfo.price-s.product.cartInfo[i].vip_truePrice)}else s.$toast(t.data.msg)})),this.$axios.get("/api/address/list?page=1&limit=20").then((function(t){s.address=t.data.data})),this.show=!1},Change:function(t){1==t?(this.priceing=this.price/100,this.priceend=100*this.priceing,this.priceing=this.priceing-this.product.userInfo.integral,this.price=this.priceing,this.priceing<0&&(this.price=0)):0==t&&(this.priceing=this.priceend,this.price=this.priceing),console.log(this.product.addressInfo.id)},onSubmit:function(){var t=this;null!=this.product.addressInfo?(this.$axios.post("/api/order/create/"+this.product.orderKey,{addressId:this.product.addressInfo.id,bargainId:0,combinationId:0,couponId:0,from:"weixinh5",mark:"",payType:"yue",phone:"",pinkId:0,real_name:"",seckill_id:0,shipping_type:1,store_id:0,useIntegral:0}).then((function(s){200==s.data.status?console.log(t.product):t.$toast(s.data.msg)})),this.$router.push({name:"Order",params:{type:1}})):this.$toast("请选择收货地址")}}},c=o,n=(i("4529"),i("2877")),r=Object(n["a"])(c,a,e,!1,null,"eee95ff2",null);s["default"]=r.exports},4529:function(t,s,i){"use strict";i("f704")},6877:function(t,s,i){t.exports=i.p+"img/dizi.d76a1cef.png"},f704:function(t,s,i){},f8b9:function(t,s,i){t.exports=i.p+"img/line.05bf1c84.jpg"}}]);
//# sourceMappingURL=chunk-378a37ff.f1ae8e54.js.map