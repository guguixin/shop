(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7ecaec38"],{"1bcb":function(t,s,e){},"4fde":function(t,s,e){"use strict";e("1bcb")},"5fbe6":function(t,s,e){t.exports=e.p+"img/logo2.47964cc3.png"},a55b:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"login"},[t._m(0),e("van-tabs",{directives:[{name:"show",rawName:"v-show",value:t.ifshowing,expression:"ifshowing"}],staticClass:"whiteBg"},[e("van-tab",{attrs:{title:"账号登录"}},[e("van-form",{on:{submit:t.doLogin}},[e("van-field",{attrs:{"right-icon":"phone-o",name:"account",placeholder:"请填写手机号",rules:[{required:!0,message:"请填写用户名"},{pattern:/^1[345678]\d{9}$/,message:"手机号码格式错误"}]},model:{value:t.account,callback:function(s){t.account=s},expression:"account"}}),e("van-field",{attrs:{"right-icon":"lock",type:"password",name:"password",placeholder:"请填写密码",rules:[{required:!0,message:"请填写密码"},{pattern:/^\w{5,18}$/,message:"密码由5-18数字a-zA-Z组成"}]},model:{value:t.password,callback:function(s){t.password=s},expression:"password"}}),e("div",{staticClass:"buttonsub"},[e("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[t._v("登录")])],1)],1),e("div",{staticClass:"registershow"},[e("span",[t._v("没有账号?")]),e("span",{staticClass:"registerspan",on:{click:function(s){t.ifshowing=!t.ifshowing}}},[t._v("立即注册")])])],1),e("van-tab",{attrs:{title:"快速登录"}},[e("van-form",{on:{submit:t.doSmsLogin}},[e("van-field",{attrs:{"left-icon":"phone-o",name:"mobile",placeholder:"请填写手机号",rules:[{required:!0,message:"请填写手机号"},{pattern:/^1[345678]\d{9}$/,message:"手机号码格式错误"}]},model:{value:t.mobile,callback:function(s){t.mobile=s},expression:"mobile"}}),e("van-field",{attrs:{name:"sms","left-icon":"lock",placeholder:"请输入验证码",rules:[{required:!0,message:"请填写验证码"}]},scopedSlots:t._u([{key:"button",fn:function(){return[e("van-button",{attrs:{round:"",size:"small",disabled:t.countdown<60,"native-type":"button",type:"warning"},on:{click:function(s){return s.stopPropagation(),t.getSms("login")}}},[t._v(t._s(t.countdown>=60?"发送验证码":t.countdown+"秒"))])]},proxy:!0}]),model:{value:t.sms,callback:function(s){t.sms=s},expression:"sms"}}),e("div",{staticClass:"buttonsub"},[e("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[t._v("快速登录")])],1)],1),e("div",{staticClass:"registershow"},[e("span",[t._v("没有账号?")]),e("span",{staticClass:"registerspan",on:{click:function(s){t.ifshowing=!t.ifshowing}}},[t._v("立即注册")])])],1)],1),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.ifshowing,expression:"!ifshowing"}],staticClass:"register"},[e("h5",{staticClass:"registerh2"},[t._v("注册账号")]),e("van-form",{on:{submit:t.doRegister}},[e("van-field",{attrs:{"left-icon":"phone-o",name:"account",placeholder:"请填写手机号",rules:[{required:!0,message:"请填写手机号"},{pattern:/^1[345678]\d{9}$/,message:"手机号码格式错误"}]},model:{value:t.mobile,callback:function(s){t.mobile=s},expression:"mobile"}}),e("van-field",{attrs:{type:"password","left-icon":"lock",name:"password",placeholder:"请填写密码",rules:[{required:!0,message:"请填写密码"},{pattern:/^\w{5,18}$/,message:"密码由5-18数字a-zA-Z组成"}]},model:{value:t.password,callback:function(s){t.password=s},expression:"password"}}),e("van-field",{attrs:{name:"sms","left-icon":"lock",placeholder:"请输入验证码",rules:[{required:!0,message:"请填写验证码"}]},scopedSlots:t._u([{key:"button",fn:function(){return[e("van-button",{attrs:{round:"",size:"small",disabled:t.countdown<60,"native-type":"button",type:"warning"},on:{click:function(s){return s.stopPropagation(),t.getSms("register")}}},[t._v(t._s(t.countdown>=60?"发送验证码":t.countdown+"秒"))])]},proxy:!0}]),model:{value:t.sms,callback:function(s){t.sms=s},expression:"sms"}}),e("div",{staticClass:"buttonsub"},[e("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[t._v("注册")])],1)],1),e("div",{staticClass:"registershow"},[e("span",[t._v("已有账号?")]),e("span",{staticClass:"registerspan",on:{click:function(s){t.ifshowing=!t.ifshowing}}},[t._v("立即登录")])])],1)],1)},n=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"shading"},[a("div",{staticClass:"pictrue"},[a("img",{attrs:{src:e("5fbe6"),alt:""}})])])}],o=e("5530"),i=e("2f62"),r={data:function(){return{account:"",password:"",mobile:"",sms:"",smskey:"",countdown:60,ifshowing:!0}},created:function(){var t=this;this.axios.get("/api/verify_code").then((function(s){t.smskey=s.data.data.key}))},methods:Object(o["a"])(Object(o["a"])({doRegister:function(t){var s=this;console.log(t),this.axios.post("/api/register",{account:t.account,captcha:t.sms,password:t.password}).then((function(t){200==t.data.status?s.$toast({message:"注册成功",icon:"passed"}):s.$toast(t.data.msg)}))},doSmsLogin:function(){var t=this;this.$axios.post("/api/login/mobile",{phone:this.mobile,captcha:this.sms}).then((function(s){if(200==s.data.status){var e=s.data.data.token;t.saveToken(e),t.getLoginInfo(),t.$toast({message:"登录成功",icon:"passed",onClose:function(){t.$router.go(-1)}})}else t.$toast(s.data.msg);console.log(s)}))},getSms:function(t){var s=this,e=this.mobile;this.axios.post("api/register/verify",{key:this.smskey,phone:e,type:t}).then((function(t){if(200==t.data.status){var e=setInterval((function(){s.countdown<=0&&(clearInterval(e),s.countdown=61),s.countdown--}),1e3);s.$toast("验证码发送成功")}else s.$toast(t.data.msg)}))},doLogin:function(t){var s=this;this.axios.post("api/login",t).then((function(t){if(200==t.data.status){s.saveToken(t.data.data.token),s.getLoginInfo(t.data.data.token);var e=new Date(t.data.data.expires_time).getTime();s.saveTimeent(e),s.$toast({message:"登录成功",icon:"passed",onClose:function(){s.$router.go(-1)}})}else s.$toast(t.data.msg)}))}},Object(i["d"])(["saveToken","saveTimeent"])),Object(i["b"])(["getLoginInfo"]))},c=r,l=(e("4fde"),e("2877")),u=Object(l["a"])(c,a,n,!1,null,null,null);s["default"]=u.exports}}]);
//# sourceMappingURL=chunk-7ecaec38.8c529da8.js.map