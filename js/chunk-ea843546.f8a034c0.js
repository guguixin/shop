(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ea843546"],{"0060":function(s,t,e){"use strict";e.r(t);var o=function(){var s=this,t=s.$createElement,e=s._self._c||t;return s.loginUser?e("div",{staticClass:"changepassword"},[e("div",{staticClass:"zhuce"},[e("span",[s._v("当前手机号：")]),e("span",[s._v(s._s(s.loginUser.phone))])]),e("van-form",{on:{submit:s.onSubmit}},[e("van-field",{attrs:{type:"password",name:"password",placeholder:"设置新密码"},model:{value:s.passwordb,callback:function(t){s.passwordb=t},expression:"passwordb"}}),e("van-field",{attrs:{type:"password",name:"password",placeholder:"确认新密码"},model:{value:s.passworda,callback:function(t){s.passworda=t},expression:"passworda"}}),e("van-field",{attrs:{name:"sms",placeholder:"请输入验证码",rules:[{required:!0,message:"请填写验证码"}]},scopedSlots:s._u([{key:"button",fn:function(){return[e("van-button",{attrs:{round:"",size:"small",disabled:s.countdown<60,"native-type":"button",type:"warning"},on:{click:function(t){return t.stopPropagation(),s.getSms("register")}}},[s._v(s._s(s.countdown>=60?"发送验证码":s.countdown+"秒"))])]},proxy:!0}],null,!1,1013444147),model:{value:s.sms,callback:function(t){s.sms=t},expression:"sms"}}),e("div",{staticClass:"buttonsub",staticStyle:{margin:"16px"}},[e("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[s._v("提交")])],1)],1)],1):s._e()},n=[],a=e("5530"),i=e("2f62"),r={data:function(){return{loginUser:null,passworda:"",passwordb:"",sms:"",countdown:60,smskey:""}},created:function(){var s=this;this.$store.getters.loginUser,this.loginUser=this.$store.getters.loginUser.data,console.log(this.$store.getters.loginUser),this.axios.get("/api/verify_code").then((function(t){console.log(t),s.smskey=t.data.data.key}))},methods:Object(a["a"])({getSms:function(){var s=this;this.axios.post("api/register/verify",{key:this.smskey,phone:this.loginUser.phone,code:""}).then((function(t){if(200==t.data.status){var e=setInterval((function(){s.countdown<=0&&(clearInterval(e),s.countdown=61),s.countdown--}),1e3);s.$toast("验证码发送成功")}else s.$toast(t.data.msg)}))},onSubmit:function(s){var t=this;console.log("submit",s),this.axios.post("/api/register/reset",{account:this.loginUser.phone,captcha:s.sms,code:"",password:s.password}).then((function(s){200==s.data.status?(t.$toast("修改成功"),t.loginOut(),t.$router.push({name:"Login"})):t.$toast(s.data.msg)}))}},Object(i["d"])(["saveToken","saveLoginInfo","loginOut"])),computed:Object(a["a"])({},Object(i["c"])(["loginUser"]))},c=r,l=(e("c966"),e("2877")),u=Object(l["a"])(c,o,n,!1,null,"6b2b36e2",null);t["default"]=u.exports},b52c:function(s,t,e){},c966:function(s,t,e){"use strict";e("b52c")}}]);
//# sourceMappingURL=chunk-ea843546.f8a034c0.js.map